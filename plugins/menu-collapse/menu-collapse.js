// Generated by CoffeeScript 1.3.1
(function() {
  var $;

  $ = jQuery;

  $.fn.menuCollapse = function() {
    var d, m;
    d = {
      menuList: 'ul.menu li',
      togglerClass: 'toggler'
    };
    m = {
      init: function() {
        var _this = this;
        return $("" + d.menuList).each(function(index, element) {
          if (m.getDepth($(element).next('li')) > m.getDepth($(element))) {
            return m.addButton($(element));
          }
        });
      },
      getDepth: function(el) {
        var theClass;
        theClass = el.attr('class');
        if (typeof theClass !== 'undefined' && (theClass != null)) {
          theClass = theClass.split(/\s/)[1];
          return theClass.charAt(theClass.length - 1);
        }
      },
      addButton: function(el) {
        return el.append("<a class='" + d.togglerClass + "'>-</a>");
      },
      getChildren: function(el) {
        var $children, parentDepth, parentLI, siblings,
          _this = this;
        parentLI = el.parent('li');
        parentDepth = m.getDepth(parentLI);
        $children = $();
        siblings = parentLI.nextAll('li');
        siblings.each(function(index, element) {
          if (parentDepth < m.getDepth($(element))) {
            return $children = $children.add($(element));
          }
        });
        return $children;
      }
    };
    m.init();
    $("a." + d.togglerClass).toggle(function() {
      m.getChildren($(this)).slideUp();
      return $(this).text("+");
    }, function() {
      m.getChildren($(this)).slideDown();
      return $(this).text("-");
    });
    return $("a." + d.togglerClass).click();
  };

  $(document).ready(function() {
    return $().menuCollapse();
  });

}).call(this);
